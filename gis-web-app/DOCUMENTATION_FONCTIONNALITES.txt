================================================================================
DOCUMENTATION DES FONCTIONNALIT√âS SIG
Application Web SIG (Syst√®me d'Information G√©ographique)
Projet de Th√®se
================================================================================

TABLE DES MATI√àRES
================================================================================

1. INTRODUCTION
2. IMPORTATION DE DONN√âES G√âOSPATIALES
3. GESTION DES COUCHES
4. NAVIGATION ET INTERACTION AVEC LA CARTE
5. ANALYSE SPATIALE
6. VISUALISATION DES ATTRIBUTS
7. EXPORTATION DE DONN√âES

================================================================================
1. INTRODUCTION
================================================================================

Cette application web SIG est une plateforme interactive permettant de visualiser,
g√©rer et analyser des donn√©es g√©ospatiales. Elle supporte plusieurs formats de
fichiers g√©ographiques standards et offre des outils d'analyse spatiale avanc√©s.

L'interface est compos√©e de trois panneaux principaux :
- Panneau gauche : Gestion des couches
- Panneau central : Carte interactive
- Panneau droit : Outils et informations sur les donn√©es

================================================================================
2. IMPORTATION DE DONN√âES G√âOSPATIALES
================================================================================

2.1. FORMATS DE FICHIERS SUPPORT√âS

L'application accepte les formats standards suivants :
- CSV (.csv) : Fichiers texte avec coordonn√©es X/Y
- Excel (.xlsx, .xls) : Fichiers Excel avec donn√©es g√©ospatiales
- GeoJSON (.geojson, .json) : Format standard pour donn√©es g√©ographiques
- Shapefile (.shp, .shx, .dbf, .prj, .cpg) : Format ESRI Shapefile
- KML (.kml) : Format Google Earth / Keyhole Markup Language

2.2. IMPORTATION DE FICHIERS CSV/EXCEL

Fonctionnement :
L'application d√©tecte automatiquement les colonnes contenant les coordonn√©es
g√©ographiques. Elle recherche les colonnes nomm√©es X, Y, Sites, A, Name, ou Nom
(cas insensible). Les coordonn√©es sont transform√©es du syst√®me EPSG:22391
(Tunisie UTM Zone 32N) vers EPSG:4326 (WGS84) pour l'affichage sur la carte.

√âtapes :
1. Cliquer sur l'ic√¥ne d'upload (üì§) dans le panneau gauche
2. S√©lectionner un fichier CSV ou Excel depuis votre ordinateur
3. L'application analyse automatiquement le fichier et d√©tecte les colonnes de coordonn√©es
4. Transformation automatique des coordonn√©es vers WGS84
5. Une nouvelle couche est cr√©√©e et affich√©e sur la carte
6. La couche appara√Æt dans la liste des couches du panneau gauche
7. La carte zoome automatiquement sur l'√©tendue des donn√©es

2.3. IMPORTATION DE FICHIERS GEOJSON

Fonctionnement :
L'application valide et normalise les donn√©es GeoJSON. Elle supporte les types
FeatureCollection, Feature unique, et objets Geometry. Si le fichier contient
un syst√®me de coordonn√©es diff√©rent de WGS84, l'application d√©tecte et transforme
automatiquement les coordonn√©es (par exemple, EPSG:32632 vers EPSG:4326).

√âtapes :
1. Cliquer sur l'ic√¥ne d'upload dans le panneau gauche
2. S√©lectionner un fichier GeoJSON
3. L'application valide la structure du fichier
4. D√©tection automatique du syst√®me de coordonn√©es (CRS)
5. Si n√©cessaire, transformation automatique des coordonn√©es vers WGS84
6. La couche est ajout√©e √† la carte avec zoom automatique sur l'√©tendue
7. Toutes les g√©om√©tries (points, lignes, polygones) sont correctement affich√©es

2.4. IMPORTATION DE SHAPEFILES

Fonctionnement :
Les Shapefiles n√©cessitent plusieurs fichiers (.shp, .shx, .dbf, .prj, .cpg).
L'application groupe automatiquement ces fichiers lors de l'importation et les
traite ensemble pour cr√©er une couche compl√®te avec g√©om√©tries et attributs.
Le fichier .prj contient les informations de projection qui sont utilis√©es
pour la transformation des coordonn√©es.

√âtapes :
1. Cliquer sur l'ic√¥ne d'upload
2. S√©lectionner tous les fichiers du Shapefile (maintenir Ctrl/Cmd pour s√©lection multiple)
3. L'application regroupe automatiquement les fichiers par nom de base
4. Lecture des g√©om√©tries depuis le fichier .shp
5. Lecture des attributs depuis le fichier .dbf
6. Lecture du syst√®me de coordonn√©es depuis le fichier .prj
7. Transformation des coordonn√©es vers WGS84 si n√©cessaire
8. La couche est cr√©√©e avec toutes les g√©om√©tries et attributs
9. La carte zoome automatiquement sur l'√©tendue du Shapefile

2.5. IMPORTATION DE FICHIERS KML

Fonctionnement :
Les fichiers KML sont convertis en GeoJSON pour l'affichage. L'application
g√®re automatiquement les d√©clarations de namespace XML manquantes et convertit
toutes les g√©om√©tries KML (points, lignes, polygones) en format GeoJSON.
Les polygones KML peuvent √™tre utilis√©s pour les requ√™tes spatiales.

√âtapes :
1. Cliquer sur l'ic√¥ne d'upload
2. S√©lectionner un fichier KML
3. L'application convertit le KML en GeoJSON
4. La couche est ajout√©e √† la carte
5. Les polygones KML peuvent √™tre utilis√©s pour les requ√™tes spatiales point-dans-polygone

2.6. TRANSFORMATION AUTOMATIQUE DES COORDONN√âES

Fonctionnement :
L'application utilise la biblioth√®que Proj4 pour transformer les coordonn√©es
entre diff√©rents syst√®mes de r√©f√©rence. Elle d√©tecte automatiquement le CRS
(Coordinate Reference System) du fichier et transforme vers WGS84 (EPSG:4326)
si n√©cessaire. Cette fonctionnalit√© est essentielle pour l'interop√©rabilit√©
des donn√©es provenant de diff√©rentes sources.

Syst√®mes support√©s :
- EPSG:22391 (Tunisie UTM Zone 32N)
- EPSG:32632 (WGS84 UTM Zone 32N)
- EPSG:4326 (WGS84 - syst√®me par d√©faut)
- Autres syst√®mes d√©tect√©s depuis les fichiers .prj

Processus de transformation :
1. D√©tection du CRS source (depuis fichier .prj, propri√©t√©s GeoJSON, ou valeurs de coordonn√©es)
2. Validation des coordonn√©es source
3. Transformation vers EPSG:4326 (WGS84) en utilisant Proj4
4. Validation des coordonn√©es transform√©es (v√©rification des limites WGS84)
5. Mise √† jour des g√©om√©tries avec les nouvelles coordonn√©es

================================================================================
3. GESTION DES COUCHES
================================================================================

3.1. ORGANISATION PAR CAT√âGORIES

Fonctionnement :
Les couches sont automatiquement organis√©es par cat√©gories bas√©es sur le nom
du fichier source. Chaque cat√©gorie peut √™tre d√©velopp√©e ou r√©duite pour
afficher/masquer les couches qu'elle contient. Cette organisation facilite
la gestion de multiples couches de donn√©es.

√âtapes pour d√©velopper/r√©duire une cat√©gorie :
1. Cliquer sur le chevron (‚ñ∂) √† gauche du nom de la cat√©gorie
2. La cat√©gorie se d√©veloppe pour afficher toutes ses couches
3. Cliquer √† nouveau pour r√©duire la cat√©gorie

3.2. VISIBILIT√â DES COUCHES

Fonctionnement :
Chaque couche peut √™tre affich√©e ou masqu√©e sur la carte sans √™tre supprim√©e.
L'√©tat de visibilit√© est indiqu√© par une ic√¥ne d'≈ìil dans la liste des couches.
Cette fonctionnalit√© permet de comparer diff√©rentes couches ou de simplifier
la visualisation en masquant certaines donn√©es.

√âtapes :
1. Localiser la couche dans le panneau gauche
2. Cliquer sur l'ic√¥ne d'≈ìil (üëÅ) √† c√¥t√© du nom de la couche
3. La couche dispara√Æt/appara√Æt sur la carte
4. L'ic√¥ne change pour indiquer l'√©tat (≈ìil ouvert/ferm√©)

3.3. S√âLECTION D'UNE COUCHE

Fonctionnement :
S√©lectionner une couche permet d'acc√©der √† ses informations, attributs,
et actions disponibles dans le panneau droit. Une seule couche peut √™tre
s√©lectionn√©e √† la fois pour l'analyse.

√âtapes :
1. Cliquer sur le nom de la couche dans le panneau gauche
2. La couche est mise en surbrillance
3. Le panneau droit affiche les informations et actions disponibles
4. Les outils de la barre lat√©rale droite deviennent actifs

3.4. CHANGEMENT DE COULEUR DES COUCHES

Fonctionnement :
Chaque couche se voit attribuer automatiquement une couleur unique al√©atoire
lors de son importation. L'utilisateur peut modifier cette couleur √† tout moment.
La couleur affecte les bordures et remplissages des g√©om√©tries sur la carte.
Cette fonctionnalit√© est importante pour la diff√©renciation visuelle des couches.

√âtapes :
1. S√©lectionner la couche dont on veut changer la couleur
2. Dans le panneau droit, section "Color", visualiser la palette de couleurs
3. Cliquer sur la couleur d√©sir√©e dans la palette
4. La couleur de la couche sur la carte est imm√©diatement mise √† jour
5. La couleur est √©galement mise √† jour dans l'indicateur de la cat√©gorie

3.5. SUPPRESSION D'UNE COUCHE

Fonctionnement :
La suppression d'une couche la retire compl√®tement de la carte et de la liste.
Si c'√©tait la derni√®re couche d'une cat√©gorie, la cat√©gorie est √©galement supprim√©e.

√âtapes :
1. Localiser la couche √† supprimer dans le panneau gauche
2. Cliquer sur l'ic√¥ne de corbeille (üóëÔ∏è) √† c√¥t√© du nom de la couche
3. La couche dispara√Æt de la carte et de la liste

3.6. R√âORGANISATION DES CAT√âGORIES (ORDRE DE SUPERPOSITION)

Fonctionnement :
Les cat√©gories peuvent √™tre r√©organis√©es pour contr√¥ler l'ordre de superposition
des couches sur la carte. Les cat√©gories en haut de la liste sont affich√©es
au-dessus des cat√©gories en bas. Cette fonctionnalit√© affecte √©galement l'ordre
de rendu sur la carte via les z-index, ce qui est crucial pour la visualisation
correcte de donn√©es superpos√©es.

√âtapes pour d√©placer une cat√©gorie vers le haut :
1. Localiser la cat√©gorie dans le panneau gauche
2. Cliquer sur le bouton fl√®che vers le haut (‚Üë) dans l'en-t√™te de la cat√©gorie
3. La cat√©gorie se d√©place d'une position vers le haut
4. Les couches de cette cat√©gorie sont maintenant rendues au-dessus des autres
5. L'ordre de superposition sur la carte est mis √† jour automatiquement

√âtapes pour d√©placer une cat√©gorie vers le bas :
1. Localiser la cat√©gorie dans le panneau gauche
2. Cliquer sur le bouton fl√®che vers le bas (‚Üì) dans l'en-t√™te de la cat√©gorie
3. La cat√©gorie se d√©place d'une position vers le bas
4. Les couches de cette cat√©gorie sont maintenant rendues en dessous des autres

Note : Les boutons sont d√©sactiv√©s si la cat√©gorie est d√©j√† en premi√®re ou
derni√®re position.

================================================================================
4. NAVIGATION ET INTERACTION AVEC LA CARTE
================================================================================

4.1. ZOOM AVANT/ARRI√àRE

Fonctionnement :
Les outils de zoom permettent d'agrandir ou de r√©duire la vue de la carte.
Le zoom peut √©galement √™tre effectu√© avec la molette de la souris. Le zoom
est essentiel pour l'analyse d√©taill√©e des donn√©es g√©ospatiales.

√âtapes pour zoomer avant :
1. Cliquer sur l'ic√¥ne d'agrandissement (üîç+) dans le panneau droit
2. La carte zoome d'un niveau
3. Ou utiliser la molette de la souris vers le haut

√âtapes pour zoomer arri√®re :
1. Cliquer sur l'ic√¥ne de r√©duction (üîç-) dans le panneau droit
2. La carte d√©zoome d'un niveau
3. Ou utiliser la molette de la souris vers le bas

4.2. D√âPLACEMENT DE LA CARTE (PAN)

Fonctionnement :
Le d√©placement de la carte permet de naviguer dans diff√©rentes zones sans
changer le niveau de zoom. Par d√©faut, le d√©placement de la carte est toujours
activ√© en cliquant et faisant glisser.

√âtapes :
1. Cliquer et maintenir le bouton de la souris sur la carte
2. Faire glisser la souris pour d√©placer la carte
3. Rel√¢cher le bouton pour arr√™ter le d√©placement

4.3. INTERACTION AVEC LES FEATURES (CLIC SUR LES POINTS)

Fonctionnement :
En cliquant sur un point de la carte, une popup s'affiche avec tous les attributs
du point. Cette fonctionnalit√© permet d'acc√©der rapidement aux informations
associ√©es √† chaque feature g√©ographique.

√âtapes :
1. Cliquer sur un point de la carte
2. Une popup s'affiche avec tous les attributs du point
3. La popup est styl√©e pour correspondre √† l'interface de l'application
4. Tous les attributs sont affich√©s dans un tableau format√©
5. Cliquer en dehors de la popup pour la fermer

Caract√©ristiques de la popup :
- En-t√™te avec le nom du point (si disponible dans les attributs)
- Tableau des attributs avec cl√©s et valeurs
- Style coh√©rent avec l'interface principale
- Protection contre les attaques XSS (√©chappement HTML)

================================================================================
5. ANALYSE SPATIALE
================================================================================

5.1. REQU√äTE SPATIALE POINT-DANS-POLYGONE

Fonctionnement :
L'application d√©tecte automatiquement les couches de points (CSV/Excel) et les
couches de polygones (KML, GeoJSON Polygon). Si des points se trouvent √† l'int√©rieur
des polygones, ils sont automatiquement mis en surbrillance avec un style sp√©cial.
Cette fonctionnalit√© est fondamentale pour l'analyse spatiale et permet d'identifier
rapidement les relations spatiales entre diff√©rents types de donn√©es.

√âtapes :
1. Importer une couche de points (fichier CSV ou Excel)
2. Importer une couche de polygones (fichier KML ou GeoJSON avec polygones)
3. L'application d√©tecte automatiquement la relation spatiale
4. Les points situ√©s √† l'int√©rieur des polygones sont mis en surbrillance
5. Les points mis en surbrillance ont :
   - Cercle ext√©rieur : 10px de rayon, jaune (#fbbf24) avec bordure (#f59e0b) et effet de lueur
   - Cercle int√©rieur : 6px de rayon, couleur originale de la couche

5.2. ALGORITHME POINT-DANS-POLYGONE

D√©tails techniques :
L'application utilise l'algorithme ray casting (lancer de rayon) pour d√©terminer
si un point se trouve √† l'int√©rieur d'un polygone. Pour chaque point, une ligne
horizontale infinie est trac√©e depuis le point vers la droite. Le nombre
d'intersections avec les bords du polygone est compt√©. Si le nombre est impair,
le point est √† l'int√©rieur du polygone.

Avantages de l'algorithme :
- Efficace m√™me pour des polygones complexes
- Fonctionne avec des polygones concaves
- Supporte les multi-polygones
- R√©sultats pr√©cis et fiables

5.3. D√âTECTION AUTOMATIQUE DES RELATIONS SPATIALES

Fonctionnement :
L'application surveille automatiquement les couches ajout√©es et d√©tecte les
relations spatiales potentielles. Lorsqu'une couche de points et une couche
de polygones sont pr√©sentes, elle ex√©cute automatiquement une requ√™te spatiale.

Processus :
1. D√©tection du type de g√©om√©trie de chaque couche (Point, Polygon, etc.)
2. Identification des couches de points (CSV, Excel, GeoJSON Point)
3. Identification des couches de polygones (KML, GeoJSON Polygon)
4. Ex√©cution automatique de la requ√™te spatiale
5. Mise en surbrillance des points trouv√©s √† l'int√©rieur des polygones

5.4. MISE √Ä JOUR DYNAMIQUE DES REQU√äTES SPATIALES

Fonctionnement :
Les requ√™tes spatiales sont recalcul√©es automatiquement lorsque :
- Une nouvelle couche est ajout√©e
- Une couche est supprim√©e
- La visibilit√© des couches change

Cela garantit que les points mis en surbrillance sont toujours √† jour avec
l'√©tat actuel des couches sur la carte.

================================================================================
6. VISUALISATION DES ATTRIBUTS
================================================================================

6.1. INFORMATIONS SUR LA COUCHE

Fonctionnement :
L'onglet "Layer Infos" dans le panneau droit affiche des informations d√©taill√©es
et techniques sur la couche s√©lectionn√©e. Ces informations sont essentielles
pour comprendre les caract√©ristiques des donn√©es g√©ospatiales.

Informations affich√©es :
- Nom de la couche
- Nombre de features (entit√©s g√©ographiques)
- Type de g√©om√©trie (Point, LineString, Polygon, MultiPoint, etc.)
- Syst√®me de coordonn√©es (CRS - Coordinate Reference System)
- √âtendue g√©ographique (bounding box) avec coordonn√©es min/max

√âtapes :
1. S√©lectionner une couche dans le panneau gauche
2. Dans le panneau droit, cliquer sur l'onglet "Layer Infos"
3. Les informations d√©taill√©es s'affichent

6.2. TABLEAU DES ATTRIBUTS

Fonctionnement :
L'onglet "Layer Infos" affiche √©galement un tableau complet de tous les attributs
de tous les features de la couche s√©lectionn√©e. Ce tableau permet d'examiner
en d√©tail les donn√©es attributaires associ√©es aux entit√©s g√©ographiques.

√âtapes :
1. S√©lectionner une couche
2. Aller dans l'onglet "Layer Infos" du panneau droit
3. Faire d√©filer jusqu'√† la section "Attributes"
4. Le tableau affiche toutes les lignes (features) et colonnes (attributs)
5. Chaque ligne repr√©sente un feature g√©ographique
6. Chaque colonne repr√©sente un attribut (propri√©t√©) du feature

Caract√©ristiques du tableau :
- Affichage de tous les features de la couche
- Tous les attributs sont visibles
- Format tabulaire facile √† lire
- D√©filement pour les grandes quantit√©s de donn√©es

6.3. RECHERCHE DANS LES ATTRIBUTS

Fonctionnement :
La fonction de recherche permet de trouver des features dans la couche s√©lectionn√©e
en recherchant dans tous les attributs. Les r√©sultats sont affich√©s dans un tableau
et peuvent √™tre survol√©s pour √™tre mis en surbrillance sur la carte.

√âtapes :
1. S√©lectionner une couche dans le panneau gauche
2. Dans le panneau droit, onglet "Layer Infos"
3. Utiliser la barre de recherche en haut
4. Taper un terme de recherche (recherche insensible √† la casse)
5. Les r√©sultats correspondants s'affichent dans un tableau
6. Survoler un r√©sultat pour le mettre en surbrillance sur la carte (jaune)
7. Cliquer sur un r√©sultat pour zoomer automatiquement sur cette feature

================================================================================
7. EXPORTATION DE DONN√âES
================================================================================

7.1. EXPORTATION EN CSV

Fonctionnement :
L'application permet d'exporter la couche s√©lectionn√©e au format CSV, incluant
tous les attributs et les coordonn√©es. Le format CSV est largement compatible
avec les logiciels de tableur et d'analyse de donn√©es.

√âtapes :
1. S√©lectionner la couche √† exporter
2. Dans le panneau droit, onglet "Data Actions"
3. Cliquer sur le bouton "Export to CSV"
4. Le fichier CSV est t√©l√©charg√© automatiquement
5. Le nom du fichier correspond au nom de la couche

Contenu du fichier CSV export√© :
- Toutes les colonnes d'attributs de la couche
- Coordonn√©es X et Y (ou lon et lat selon le type de donn√©es)
- Toutes les propri√©t√©s des features

7.2. EXPORTATION EN GEOJSON

Fonctionnement :
L'application permet d'exporter la couche s√©lectionn√©e au format GeoJSON standard,
pr√©servant toutes les g√©om√©tries et attributs. Le format GeoJSON est le standard
de l'industrie pour l'√©change de donn√©es g√©ospatiales sur le web.

√âtapes :
1. S√©lectionner la couche √† exporter
2. Dans le panneau droit, onglet "Data Actions"
3. Cliquer sur le bouton "Export to GeoJSON"
4. Le fichier GeoJSON est t√©l√©charg√© automatiquement
5. Le nom du fichier correspond au nom de la couche

Contenu du fichier GeoJSON export√© :
- Structure FeatureCollection standard
- Toutes les g√©om√©tries (points, lignes, polygones)
- Tous les attributs (propri√©t√©s) de chaque feature
- Format conforme aux sp√©cifications GeoJSON

Avantages du format GeoJSON :
- Standard ouvert et largement support√©
- Compatible avec la plupart des logiciels SIG
- Peut √™tre utilis√© directement dans des applications web
- Pr√©serve toutes les informations g√©om√©triques et attributaires

================================================================================
CONCLUSION
================================================================================

Cette application web SIG offre un ensemble complet d'outils pour la visualisation,
la gestion et l'analyse de donn√©es g√©ospatiales. Elle supporte de multiples formats
de fichiers standards, offre des outils d'analyse spatiale avanc√©s, et fournit
une interface utilisateur intuitive.

Les fonctionnalit√©s SIG principales incluent :
‚úì Importation multi-formats (CSV, Excel, GeoJSON, Shapefile, KML)
‚úì Transformation automatique des syst√®mes de coordonn√©es
‚úì Gestion avanc√©e des couches avec organisation par cat√©gories
‚úì Contr√¥le de l'ordre de superposition des couches
‚úì Navigation interactive sur la carte (zoom, pan)
‚úì Analyse spatiale avec requ√™tes point-dans-polygone automatiques
‚úì Visualisation des attributs et informations des features
‚úì Exportation de donn√©es en formats standards (CSV, GeoJSON)

================================================================================
FIN DU DOCUMENT
================================================================================
